<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Vuelos</title>
</head>

<body>
    <h1> Controlador de vuelos</h1>
    <button type="button" onclick="loadXMLDoc()"> Mostrar datos</button>
    <div id="showDataDiv">
    </div>
    <script>
        function loadXMLDoc() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    //Contendor para pintar los datos de los vuelos
                    var flightContainer = document.getElementById("showDataDiv");
                    // Parso JSON para poder acceder a los datos del servidor y pintarlo en pantalla
                    var readFlight = JSON.parse(this.responseText);
                    var numberOfFlights = readFlight.numeroVuelos;
                    var arrayOfFlight = readFlight.vuelos;
                    flightContainer.innerHTML = "";
                    // Bucle que permite mostrar los datos en um p√°rrafo
                    for (let index = 0; index < numberOfFlights; index++) {
                        var fligthCode = document.createTextNode(arrayOfFlight[index].codigo);
                        var dataParagraph = document.createElement("p");
                        dataParagraph.appendChild(fligthCode);
                        dataParagraph.setAttribute("class", "data");
                        flightContainer.appendChild(dataParagraph);
                        console.log(arrayOfFlight[index].codigo);
                    }
                }
            };
            xhttp.open("GET", "http://localhost/Javier/adat_vuelos/main/read_flight.php", true);
            xhttp.send();
        }
    </script>
</body>

</html>